<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Birthday Treesa! üéÇ</title>
<style>
  /* Basic Reset and Styling */
  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }
  body {
    font-family: Arial, sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
    color: white;
  }
  .bg-video {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    object-fit: cover; z-index: -1;
  }
  .countdown {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    min-height: 100vh; padding: 20px; text-align: center; position: relative; z-index: 1;
  }
  .countdown h3 {
    font-size: 2.5rem; color: white; margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
  }
  .countdown p {
    font-size: 1.2rem; color: rgba(255,255,255,0.9); margin-bottom: 30px;
  }
  .timer {
    font-size: 3rem; color: #fff; font-weight: bold; margin-bottom: 40px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.6);
  }
  .cake-section {
    display: flex; flex-direction: column; align-items: center; gap: 30px;
  }
  #cakeBtn {
    background: linear-gradient(45deg, #ff6b9d, #ff4757);
    border: none; padding: 20px 40px; font-size: 1.5rem; color: white;
    border-radius: 50px; cursor: pointer;
    box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
    transition: all 0.3s ease; font-weight: bold; position: relative; overflow: hidden;
    user-select: none;
  }
  #cakeBtn[disabled] {
    background: #777;
    cursor: not-allowed;
    box-shadow: none;
  }
  #cakeBtn:hover:not([disabled]) {
    transform: translateY(-3px);
    box-shadow: 0 12px 35px rgba(255, 107, 107, 0.4);
  }
  .cake-image {
    width: 200px; height: auto;
    filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
    animation: floating 3s ease-in-out infinite;
  }
  @keyframes floating {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }
  .gift-box {
    width: 400px; height: 400px;
    background: linear-gradient(135deg, #ff69b4, #ff1493);
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(255, 20, 147, 0.7);
    position: relative;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.4rem;
    font-weight: bold;
    user-select: none;
    text-align: center;
    color: white;
    transition: box-shadow 0.3s ease;
    margin: 0 auto 40px auto;
  }
  .gift-box:hover {
    box-shadow: 0 0 40px rgba(255, 20, 147, 1);
  }
  .hidden-photo {
    opacity: 0; width: 400px; height: 400px; border-radius: 20px; object-fit: cover;
    box-shadow: 0 10px 40px rgba(255, 20, 147, 0.8);
    user-select: none;
    transform-origin: center bottom;
    transform: scale(0.8);
    transition: opacity 0.8s ease, transform 0.8s ease;
    cursor: pointer;
    display: block;
    margin: -440px auto 40px auto;
    position: relative;
    z-index: 10;
  }
  .hidden-photo.revealed {
    opacity: 1;
    transform: scale(1);
    margin-top: 0;
  }
  .overlay {
    position: fixed; top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.85);
    display: flex; align-items: center; justify-content: center;
    z-index: 1000;
    opacity: 0; visibility: hidden;
    transition: all 0.3s ease;
  }
  .overlay.active {
    opacity: 1; visibility: visible;
  }
  .candle-section {
    text-align: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    max-width: 400px;
    width: 90%;
  }
  .candle-section h2 {
    color: white;
    font-size: 2.5rem;
    margin-bottom: 30px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
  }
  .candles-container {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 30px;
  }
  .candle {
    width: 20px;
    height: 80px;
    background: linear-gradient(to top, #8b4513, #deb887);
    border-radius: 10px;
    position: relative;
    margin-bottom: 20px;
  }
  .flame {
    width: 15px;
    height: 20px;
    background: radial-gradient(circle, #ffd700, #ff6b47);
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    animation: flicker 0.5s ease-in-out infinite alternate;
  }
  @keyframes flicker {
    0% { transform: translateX(-50%) rotate(-2deg); }
    100% { transform: translateX(-50%) rotate(2deg); }
  }
  .blow-btn {
    background: linear-gradient(45deg, #74b9ff, #0984e3);
    border: none;
    padding: 15px 30px;
    font-size: 1.3rem;
    color: white;
    border-radius: 50px;
    cursor: pointer;
    margin-bottom: 20px;
    transition: all 0.3s ease;
    user-select: none;
  }
  .blow-btn:hover {
    transform: scale(1.05);
  }
  .progress-container {
    width: 300px;
    height: 10px;
    background: rgba(255,255,255,0.3);
    border-radius: 5px;
    margin: 20px auto;
    overflow: hidden;
  }
  .progress-bar {
    width: 0%;
    height: 100%;
    background: linear-gradient(45deg, #00d2ff, #3a7bd5);
    border-radius: 5px;
    transition: width 0.1s ease;
  }
  .wind-effect {
    position: absolute;
    width: 100px;
    height: 100px;
    background: radial-gradient(circle, rgba(173,216,230,0.3), transparent);
    border-radius: 50%;
    animation: windBlow 0.3s ease-out;
  }
  @keyframes windBlow {
    0% { transform: scale(0); opacity: 1; }
    100% { transform: scale(3); opacity: 0; }
  }
  .confetti {
    position: absolute;
    width: 10px;
    height: 10px;
    background: #ff6b9d;
    animation: confettiFall 3s linear forwards;
    border-radius: 50%;
    pointer-events: none;
    z-index: 1200;
  }
  @keyframes confettiFall {
    0% { 
      transform: translateY(-100vh) rotate(0deg);
      opacity: 1; 
    }
    100% { 
      transform: translateY(100vh) rotate(720deg);
      opacity: 0; 
    }
  }
  .success-message {
    color: white;
    font-size: 2rem;
    text-align: center;
    margin: 20px 0;
    animation: fadeInScale 0.5s ease;
    user-select: none;
  }
  @keyframes fadeInScale {
    0% { opacity: 0; transform: scale(0.5); }
    100% { opacity: 1; transform: scale(1); }
  }
  .cake-cutting-section {
    text-align: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    max-width: 400px;
    width: 90%;
  }
  .interactive-cake {
    width: 300px;
    height: 200px;
    background: linear-gradient(45deg, #8b4513, #deb887);
    border-radius: 10px;
    margin: 30px auto;
    position: relative;
    cursor: crosshair;
    border: 3px solid #fff;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    user-select: none;
  }
  .cake-layer {
    position: absolute;
    width: 100%;
    height: 60px;
    background: linear-gradient(45deg, #ff6b9d, #ff4757);
    border-radius: 5px;
    top: 20px;
  }
  .cut-line {
    position: absolute;
    background: #fff;
    box-shadow: 0 0 10px rgba(255,255,255,0.8);
    z-index: 10;
    animation: cutGlow 0.5s ease;
  }
  @keyframes cutGlow {
    0% { box-shadow: 0 0 5px rgba(255,255,255,0.5); }
    100% { box-shadow: 0 0 20px rgba(255,255,255,1); }
  }
  .card-container {
    perspective: 1000px;
    width: 400px;
    height: 600px;
    margin: 0 auto;
    position: relative;
    user-select: none;
  }
  .greeting-card {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    transform-style: preserve-3d;
    animation: cardEntrance 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }
  @keyframes cardEntrance {
    0% { 
      opacity: 0; 
      transform: rotateY(-90deg) scale(0.5);
    }
    100% { 
      opacity: 1; 
      transform: rotateY(0deg) scale(1);
    }
  }
  .card-photo {
    width: 140px;
    height: 140px;
    border-radius: 50%;
    border: 5px solid white;
    margin-bottom: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  }
  .card-message {
    color: white;
    font-size: 1.2rem;
    line-height: 1.6;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    margin-bottom: 30px;
    white-space: pre-line;
  }
  .card-navigation {
    display: flex;
    gap: 20px;
    margin-top: auto;
  }
  .nav-btn, #finalBtn {
    background: rgba(255,255,255,0.2);
    border: 2px solid white;
    color: white;
    padding: 10px 20px;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s ease;
    user-select: none;
  }
  .nav-btn:hover, #finalBtn:hover {
    background: white;
    color: #667eea;
  }
  .nav-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  #finalBtn {
    margin-top: 20px;
  }
  .close-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.2rem;
    user-select: none;
  }
</style>
</head>
<body>

<video class="bg-video" autoplay muted loop playsinline>
  <source src="video/bg video - Made with Clipchamp.mp4" type="video/mp4" />
</video>

<section class="countdown">
  <h3>Countdown to the Big Moment!</h3>
  <p>Get ready for the celebration on September 25!</p>
  <div class="timer" id="timer">üéâ Time to Celebrate! üéâ</div>
  <div class="cake-section">
    <button id="cakeBtn" disabled>Cut the Cake Now</button>
    <img src="images/bday-cake.png" alt="Cake" class="cake-image" id="cakeImage" />
  </div>
  <div style="margin-top: 40px; text-align: center;">
    <div id="giftBox" class="gift-box" tabindex="0" role="button" aria-label="Reveal Gift Box">üéÅ Tap to Reveal Your Gift üéÅ</div>
    <img src="images/6.png" id="birthdayPhoto" class="hidden-photo" alt="Birthday Treesa" />
  </div>
</section>

<div id="alertBox" role="alertdialog" aria-modal="true" aria-labelledby="alertMessage" style="display:none;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);background:rgba(0,0,0,0.9);color:white;padding:20px 30px;border-radius:15px;box-shadow:0 0 15px #ff69b4;font-size:1.2rem;z-index:1300;text-align:center;max-width:90vw; user-select:none;">
  <div id="alertMessage"></div>
  <button id="alertClose" style="margin-top:15px;background:#ff69b4;padding:8px 16px;border-radius:30px;color:white;cursor:pointer;font-weight:bold;user-select:none;">OK</button>
</div>

<!-- Candle Overlay -->
<div class="overlay" id="candleOverlay" role="dialog" aria-hidden="true">
  <div class="candle-section">
    <h2>üïØÔ∏è Blow the Candles! üïØÔ∏è</h2>
    <div class="candles-container" id="candlesContainer"></div>
    <button class="blow-btn" id="blowBtn" onmousedown="startBlowing()" onmouseup="stopBlowing()" ontouchstart="startBlowing()" ontouchend="stopBlowing()">üí® Hold to Blow üí®</button>
    <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>
    <div id="blowMessage"></div>
    <button class="close-btn" onclick="closeOverlay()">&times;</button>
  </div>
</div>

<!-- Cake Cutting Overlay -->
<div class="overlay" id="cakeCuttingOverlay" role="dialog" aria-hidden="true">
  <div class="cake-cutting-section">
    <h2>üç∞ Cut the Cake! üç∞</h2>
    <p style="color:white; margin-bottom:20px;">Make 2 cuts across the cake with your mouse/finger!</p>
    <div class="interactive-cake" id="interactiveCake">
      <div class="cake-layer"></div>
    </div>
    <div id="cuttingInstructions" style="color:white; margin-top:20px;">
      Cuts remaining: <span id="cutsRemaining">2</span>
    </div>
    <button class="close-btn" onclick="closeCakeOverlay()">&times;</button>
  </div>
</div>

<!-- Greeting Cards Overlay -->
<div class="overlay" id="cardsOverlay" role="dialog" aria-hidden="true">
  <div class="card-container">
    <div class="greeting-card" id="currentCard">
      <button class="close-btn" onclick="closeCardsOverlay()">&times;</button>
      <img class="card-photo" id="cardPhoto" src="images/7.png" alt="Birthday Person" />
      <div class="card-message" id="cardMessage"></div>
      <div class="card-navigation" id="cardNavigation">
        <button class="nav-btn" id="prevBtn" onclick="previousCard()">‚Üê Previous</button>
        <button class="nav-btn" id="nextBtn" onclick="nextCard()">Next ‚Üí</button>
      </div>
      <button id="finalBtn" style="display:none; margin-top:20px;">I need to say something! Click me</button>
    </div>
  </div>
</div>

<script>
  const birthdayDate = new Date();
  const timerEl = document.getElementById('timer');
  const cakeBtn = document.getElementById('cakeBtn');
  const candleOverlay = document.getElementById('candleOverlay');
  const cardsOverlay = document.getElementById('cardsOverlay');
  const cakeCuttingOverlay = document.getElementById('cakeCuttingOverlay');
  const candleContainer = document.getElementById('candlesContainer');
  const blowBtn = document.getElementById('blowBtn');
  const progressBar = document.getElementById('progressBar');
  const cutsRemaining = document.getElementById('cutsRemaining');
  const interactiveCake = document.getElementById('interactiveCake');
  const giftBox = document.getElementById('giftBox');
  const birthdayPhoto = document.getElementById('birthdayPhoto');
  const alertBox = document.getElementById('alertBox');
  const alertMessage = document.getElementById('alertMessage');
  const alertClose = document.getElementById('alertClose');
  const cardPhoto = document.getElementById('cardPhoto');
  const cardMessage = document.getElementById('cardMessage');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const finalBtn = document.getElementById('finalBtn');

  let isBlowing = false;
  let blowInterval;
  let blowProgress = 0;
  let cuts = 0;
  let currentCardIndex = 0;
  let popupActive = false;

  function disableInputsDuringPopup() {
    giftBox.style.pointerEvents = 'none';
    cakeBtn.style.pointerEvents = 'none';
  }
  function enableInputsAfterPopup() {
    giftBox.style.pointerEvents = 'auto';
    cakeBtn.style.pointerEvents = 'auto';
  }

  function confettiWithMessage(msg) {
    if(popupActive) return;
    popupActive = true;
    disableInputsDuringPopup();

    for(let i=0; i<30; i++) {
      setTimeout(() => {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random()*100 + '%';
        confetti.style.background = ['#ff6b9d','#feca57','#74b9ff','#6c5ce7','#fd79a8'][Math.floor(Math.random()*5)];
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 2500);
      }, i*60);
    }
    showPopupMessage(msg);
  }

  function showPopupMessage(msg) {
    alertMessage.textContent = msg;
    alertBox.style.display = 'block';
    alertBox.focus();
  }
  alertClose.addEventListener('click', () => {
    alertBox.style.display = 'none';
    popupActive = false;
    enableInputsAfterPopup();
  });

  function updateTimer() {
    const now = new Date();
    const diff = birthdayDate - now;
    if(diff <= 0){
      timerEl.textContent = "üéâ Happy Birthday Treesa! üéâ";
      cakeBtn.disabled = false;
      cakeBtn.style.cursor = 'pointer';
      giftBox.style.pointerEvents = "auto";
    } else {
      const days = Math.floor(diff / (1000*60*60*24));
      const hours = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
      const minutes = Math.floor((diff % (1000*60*60)) / (1000*60));
      const seconds = Math.floor((diff % (1000*60)) / 1000);
      timerEl.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
      cakeBtn.disabled = true;
      cakeBtn.style.cursor = 'not-allowed';
      giftBox.style.pointerEvents = "auto";
    }
  }
  setInterval(updateTimer, 1000);
  updateTimer();

  cakeBtn.addEventListener('click', () => {
    const now = new Date();
    if(now < birthdayDate) {
      confettiWithMessage("Not yet the time! Please wait till your special day.");
      return;
    }
    showCandleOverlay();
  });

  giftBox.addEventListener('click', () => {
    const now = new Date();
    if(now < birthdayDate) {
      confettiWithMessage("Not yet the time! Please wait to reveal your gift!");
      return;
    }
    if(!birthdayPhoto.classList.contains('revealed')){
      // Force repaint fix
      birthdayPhoto.style.transition = 'none';
      birthdayPhoto.style.opacity = '0';
      void birthdayPhoto.offsetWidth;
      birthdayPhoto.classList.add('revealed');
      birthdayPhoto.style.transition = 'transform 0.5s ease, opacity 0.8s ease';
      birthdayPhoto.style.opacity = '1';
      giftBox.style.display = 'none';
    }
  });

  function popRevealAnimation(element){
    element.style.transition = 'transform 0.5s ease, opacity 0.5s ease';
    element.style.transformOrigin = 'center bottom';
    element.style.transform = 'scale(0.8)';
    setTimeout(() => {
      element.style.transform = 'scale(1)';
      element.style.opacity = '1';
    }, 50);
  }

  function showCandleOverlay(){
    candleOverlay.classList.add('active');
    createCandles();
    progressBar.style.width = '0%';
    blowProgress = 0;
  }
  function closeOverlay(){
    candleOverlay.classList.remove('active');
    stopBlowing();
    blowProgress = 0;
    progressBar.style.width = '0%';
    document.getElementById('blowMessage').innerHTML = '';
  }
  function createCandles(){
    candleContainer.innerHTML = '';
    for(let i=0; i<5; i++){
      const candle = document.createElement('div');
      candle.className = 'candle';
      const flame = document.createElement('div');
      flame.className = 'flame';
      flame.id = `flame${i}`;
      candle.appendChild(flame);
      candleContainer.appendChild(candle);
    }
  }
  blowBtn.addEventListener('mousedown', startBlowing);
  blowBtn.addEventListener('mouseup', stopBlowing);
  blowBtn.addEventListener('touchstart', startBlowing);
  blowBtn.addEventListener('touchend', stopBlowing);
  function startBlowing() {
    if(isBlowing) return;
    isBlowing = true;
    blowInterval = setInterval(() => {
      if(blowProgress < 100){
        blowProgress += 2;
        progressBar.style.width = blowProgress + '%';
        createWindEffect();
        if(blowProgress > 20 && blowProgress < 25) extinguishCandle(0);
        if(blowProgress > 40 && blowProgress < 45) extinguishCandle(1);
        if(blowProgress > 60 && blowProgress < 65) extinguishCandle(2);
        if(blowProgress > 80 && blowProgress < 85) extinguishCandle(3);
        if(blowProgress > 95) extinguishCandle(4);
        if(blowProgress >= 100){
          completeBlowing();
        }
      }
    }, 50);
  }
  function stopBlowing(){
    isBlowing = false;
    clearInterval(blowInterval);
  }
  function createWindEffect(){
    const wind = document.createElement('div');
    wind.className = 'wind-effect';
    wind.style.left = Math.random()*100 + '%';
    wind.style.top = Math.random()*100 + '%';
    candleOverlay.querySelector('.candle-section').appendChild(wind);
    setTimeout(() => {
      if(wind.parentNode) wind.parentNode.removeChild(wind);
    }, 300);
  }
  function extinguishCandle(i){
    const flame = document.getElementById(`flame${i}`);
    if(flame) flame.style.display = 'none';
  }
  function completeBlowing(){
    stopBlowing();
    document.getElementById('blowMessage').innerHTML = '<div class="success-message">üéâ Many Many Happy Returns of the Day Treesa! üéâ</div>';
    createConfetti();
    setTimeout(() => {
      closeOverlay();
      setTimeout(() => showCakeCutting(), 1000);
    }, 3000);
  }
  function createConfetti(){
    const colors = ['#ff6b9d','#feca57','#74b9ff','#6c5ce7','#fd79a8'];
    for(let i=0; i<50; i++){
      setTimeout(() => {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random()*100 + '%';
        confetti.style.background = colors[Math.floor(Math.random()*colors.length)];
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 3000);
      }, i*50);
    }
  }

  function showCakeCutting(){
    cakeCuttingOverlay.classList.add('active');
    setupCakeCutting();
  }
  function closeCakeOverlay(){
    cakeCuttingOverlay.classList.remove('active');
  }
  function setupCakeCutting(){
    const cake = interactiveCake;
    cuts = 0;
    cutsRemaining.textContent = '2';
    cake.querySelectorAll('.cut-line').forEach(el => el.remove());
    let isDrawing = false;
    let startX=0, startY=0;

    cake.onmousedown = null; cake.onmousemove = null; cake.onmouseup = null;
    cake.ontouchstart = null; cake.ontouchmove = null; cake.ontouchend = null;

    cake.onmousedown = startCut;
    cake.onmousemove = drawCut;
    cake.onmouseup = endCut;

    cake.ontouchstart = function(e){
      e.preventDefault();
      const t = e.touches[0] || e.changedTouches[0];
      const evt = new MouseEvent('mousedown', {clientX:t.clientX,clientY:t.clientY});
      cake.dispatchEvent(evt);
    };
    cake.ontouchmove = function(e){
      e.preventDefault();
      const t = e.touches[0] || e.changedTouches[0];
      const evt = new MouseEvent('mousemove', {clientX:t.clientX,clientY:t.clientY});
      cake.dispatchEvent(evt);
    };
    cake.ontouchend = function(e){
      e.preventDefault();
      const t = e.changedTouches[0];
      const evt = new MouseEvent('mouseup', {clientX:t.clientX,clientY:t.clientY});
      cake.dispatchEvent(evt);
    };

    function startCut(e){
      if(cuts >= 2) return;
      isDrawing=true;
      const rect = cake.getBoundingClientRect();
      startX = e.clientX - rect.left;
      startY = e.clientY - rect.top;
    }
    function drawCut(e){
      if(!isDrawing || cuts >= 2) return;
      const rect = cake.getBoundingClientRect();
      const currX = e.clientX - rect.left;
      const currY = e.clientY - rect.top;
      const deltaX = currX - startX;
      const deltaY = currY - startY;
      const length = Math.sqrt(deltaX*deltaX + deltaY*deltaY);
      const angle = Math.atan2(deltaY, deltaX);
      if(length > 20){
        createCutLine(startX, startY, length, angle);
      }
    }
    function endCut(e){
      if(isDrawing && cuts<2){
        cuts++;
        cutsRemaining.textContent = (2 - cuts).toString();
        if(cuts===2){
          setTimeout(() => {
            explodeCake();
          }, 500);
        }
      }
      isDrawing = false;
    }
  }
  function createCutLine(x,y,length,angle){
    const cake = interactiveCake;
    const line = document.createElement('div');
    line.className = 'cut-line';
    line.style.width = length + 'px';
    line.style.height = '3px';
    line.style.left = x + 'px';
    line.style.top = y + 'px';
    line.style.transform = `rotate(${angle}rad)`;
    line.style.transformOrigin = '0 50%';
    cake.appendChild(line);
  }
  function explodeCake(){
    const cake = interactiveCake;
    cake.style.animation = 'none';
    cake.style.transform = 'scale(1.5)';
    cake.style.opacity = '0';
    cake.style.transition = 'all 0.8s ease';
    for(let i=0; i<10; i++){
      setTimeout(() => {
        const piece = document.createElement('div');
        piece.style.position = 'absolute';
        piece.style.width = '20px';
        piece.style.height = '20px';
        piece.style.background = '#8b4513';
        piece.style.borderRadius = '3px';
        piece.style.left = Math.random()*100 + '%';
        piece.style.top = '50%';
        piece.style.animation = `confettiFall ${2 + Math.random()}s linear forwards`;
        cake.appendChild(piece);
      }, i*100);
    }
    setTimeout(() => {
      closeCakeOverlay();
      setTimeout(() => {
        showGreetingCards();
      }, 1000);
    }, 2000);
  }

  // Greeting Cards list
  const greetingCards = [
    { message: "üéâ Happy Birthday Chechimaaa! üéâ\n\nEven though miles separate us, my heart is right there with you, celebrating every moment of your special day.‚ù§Ô∏è" },
    { message: "üíñ To my dearest Chechimaaa, üíñ\n\nWishing you all the joy, laughter, and love that you bring into my life every day. I miss you so much!" },
    { message: "üåç Happy Birthday from afar! üåç\n\nNo matter the distance, you‚Äôre always close to my heart. Here‚Äôs to amazing memories and new adventures!" },
    { message: "ü•∞ Dear Chechimaaa, ü•∞\n\nMay this year bring you happiness, success, and everything you dream of. I‚Äôm counting the days until we can celebrate together!" }
];


  function showGreetingCards(){
    currentCardIndex = 0;
    cardsOverlay.classList.add('active');
    displayCard();
  }
  function displayCard(){
    // Force cap
    if(currentCardIndex > greetingCards.length - 1) currentCardIndex = greetingCards.length -1;
    if(currentCardIndex < 0) currentCardIndex = 0;

    cardPhoto.style.display = 'block';
    cardMessage.textContent = greetingCards[currentCardIndex].message;
    prevBtn.style.display = 'inline-block';
    nextBtn.style.display = 'inline-block';
    finalBtn.style.display = 'none';

    prevBtn.disabled = currentCardIndex === 0;
    nextBtn.disabled = currentCardIndex === greetingCards.length - 1;

    // Show final button only on last card (4th card)
    if(currentCardIndex === greetingCards.length -1){
      finalBtn.style.display = 'inline-block';
    }

    const card = document.getElementById('currentCard');
    card.style.animation = 'none';
    card.offsetHeight; // reflow
    card.style.animation = 'cardEntrance 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
  }

  nextBtn.onclick = () => {
    if(currentCardIndex < greetingCards.length - 1){
      currentCardIndex++;
      displayCard();
    }
  };
  prevBtn.onclick = () => {
    if(currentCardIndex > 0){
      currentCardIndex--;
      displayCard();
    }
  };
  finalBtn.onclick = () => {
    window.location.href = 'index.html';
  };

  function closeCardsOverlay(){
    cardsOverlay.classList.remove('active');
  }
</script>

</body>
</html>
